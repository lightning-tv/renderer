{"version":3,"file":"text-events-legacy-By_BSZXd.js","sources":["../../tests/text-events.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type INode,\n  type ITextNode,\n  type RendererMain,\n  type Dimensions,\n  type NodeLoadedEventHandler,\n  type NodeFailedEventHandler,\n} from '@lightningjs/renderer';\nimport { EventEmitter } from '@lightningjs/renderer/utils';\nimport type { ExampleSettings } from '../common/ExampleSettings.js';\n\nconst HEADER_SIZE = 45;\nconst FONT_SIZE = 60;\nconst BUTTON_PADDING = 10;\nconst BEGIN_Y = HEADER_SIZE;\n\nexport default async function ({ renderer, testRoot }: ExampleSettings) {\n  const header = renderer.createTextNode({\n    text: `Text Event Test`,\n    fontSize: HEADER_SIZE,\n    offsetY: -5,\n    parent: testRoot,\n  });\n\n  // Poor man's marquee\n  const sdfLabel = renderer.createTextNode({\n    text: 'SDF:',\n    fontSize: 45,\n    parent: testRoot,\n    x: 100,\n    y: (renderer.settings.appHeight * 1) / 4 - 45 / 2,\n  });\n\n  const marqueeSdf = new BoxedText(\n    {\n      x: 0,\n      y: BEGIN_Y,\n      boxColor1: 0x9f6dffff,\n      boxColor2: 0x00aaaaff,\n      textColor: 0xffffffff,\n      fontFamily: 'Ubuntu',\n      parent: testRoot,\n    },\n    renderer,\n  );\n\n  marqueeSdf.on('afterLayout', () => {\n    marqueeSdf.x = renderer.settings.appWidth / 2 - marqueeSdf.node.width / 2;\n    marqueeSdf.y =\n      (renderer.settings.appHeight * 1) / 4 - marqueeSdf.node.height / 2;\n  });\n\n  const canvasLabel = renderer.createTextNode({\n    text: 'Canvas:',\n    fontSize: 45,\n    parent: testRoot,\n    x: 100,\n    y: (renderer.settings.appHeight * 3) / 4 - 45 / 2,\n  });\n\n  const marqueeCanvas = new BoxedText(\n    {\n      x: 0,\n      y: BEGIN_Y,\n      boxColor1: 0x00aaaaff,\n      boxColor2: 0x9f6dffff,\n      textColor: 0xffffffff,\n      fontFamily: 'NotoSans',\n      parent: testRoot,\n    },\n    renderer,\n  );\n\n  marqueeCanvas.on('afterLayout', () => {\n    marqueeCanvas.x =\n      renderer.settings.appWidth / 2 - marqueeCanvas.node.width / 2;\n    marqueeCanvas.y =\n      (renderer.settings.appHeight * 3) / 4 - marqueeCanvas.node.height / 2;\n  });\n\n  const marqueeText = `The following is a test of the text loaded event...\nFrom Philly's streets to Dutch canal's grace,\nA code symphony spanned time and space.\nLightning 3 emerged, open and free,\nTV apps bloomed like waves on the sea.\n\nJavaScript's art with WebGL's embrace,\nA framework for screens, a virtual space.\nDispersed yet aligned, the team took flight,\nPhiladelphia and Netherlands, day and night.\n\nTogether they wove lines of code,\nInnovation sparked, passion glowed.\nLightning 3 arose, a collaborative dream,\nUniting two lands, a powerful stream.`;\n  const MARQUEE_MAX = 40;\n  let numChars = 0;\n  let i = 0;\n  let state: 'growing' | 'scrolling' | 'shrinking' = 'growing';\n  // Run the marquee scroll\n  setInterval(() => {\n    if (state === 'growing') {\n      numChars++;\n\n      if (numChars <= MARQUEE_MAX && numChars <= marqueeText.length - i) {\n        // No change\n      } else if (\n        numChars >= MARQUEE_MAX &&\n        numChars <= marqueeText.length - i\n      ) {\n        numChars = MARQUEE_MAX;\n        state = 'scrolling';\n      } else if (numChars > 0) {\n        state = 'shrinking';\n      }\n    } else if (state === 'shrinking') {\n      i++;\n      numChars--;\n      if (numChars === 0) {\n        i = 0;\n        state = 'growing';\n      }\n    } else {\n      i++;\n      if (numChars >= marqueeText.length - i) {\n        state = 'shrinking';\n      }\n    }\n    // Set the text\n    marqueeSdf.text = marqueeText.substring(i, i + numChars);\n    marqueeCanvas.text = marqueeSdf.text;\n  }, 50);\n\n  const textFailedEventTest = renderer.createTextNode({\n    y: 50,\n    fontFamily: '$$SDF_FAILURE_TEST$$',\n    textRendererOverride: 'sdf',\n    parent: testRoot,\n    fontSize: 50,\n  });\n\n  let textError: Error | undefined;\n  try {\n    textError = await waitForTextFailed(textFailedEventTest);\n  } catch (e: unknown) {\n    // Nothing\n  }\n\n  textFailedEventTest.fontFamily = 'Ubuntu';\n  if (textError) {\n    textFailedEventTest.text = 'Failure Event Test Passed!';\n    textFailedEventTest.color = 0x00ff00ff;\n  } else {\n    textFailedEventTest.text = 'Failure Event Test Failed!';\n    textFailedEventTest.color = 0xff0000ff;\n  }\n}\n\ninterface BoxedTextProps {\n  x: number;\n  y: number;\n  boxColor1: number;\n  boxColor2: number;\n  textColor: number;\n  fontFamily: string;\n  parent: INode | null;\n}\n\nclass BoxedText extends EventEmitter implements BoxedTextProps {\n  readonly node: INode;\n  readonly textNode: ITextNode;\n  constructor(\n    private props: Partial<BoxedTextProps>,\n    private renderer: RendererMain,\n  ) {\n    super();\n    this.node = renderer.createNode({\n      x: props.x,\n      y: props.y,\n      colorTop: props.boxColor1,\n      colorBottom: props.boxColor2,\n      shader: renderer.createShader('RoundedRectangle', {\n        radius: 10,\n      }),\n      parent: props.parent,\n    });\n\n    this.textNode = renderer.createTextNode({\n      x: 0,\n      y: 0,\n      fontSize: FONT_SIZE,\n      offsetY: -5,\n      alpha: 0,\n      color: props.textColor,\n      fontFamily: props.fontFamily,\n      parent: this.node,\n    });\n\n    this.textNode.on('loaded', this.onTextLoaded);\n  }\n\n  private onTextLoaded: NodeLoadedEventHandler = (target, payload) => {\n    this.layout(payload.dimensions);\n  };\n\n  private layout(textDimensions: Dimensions) {\n    this.node.width = textDimensions.width + BUTTON_PADDING * 2;\n    this.node.height = textDimensions.height + BUTTON_PADDING * 2;\n    this.textNode.x = this.node.width / 2 - textDimensions.width / 2;\n    this.textNode.y = this.node.height / 2 - textDimensions.height / 2;\n    this.textNode.alpha = 1;\n    this.emit('afterLayout');\n  }\n\n  get text(): string {\n    return this.textNode.text;\n  }\n\n  set text(v: string) {\n    this.textNode.text = v;\n  }\n\n  get x(): number {\n    return this.node.x;\n  }\n\n  set x(v: number) {\n    this.node.x = v;\n  }\n\n  get y(): number {\n    return this.node.y;\n  }\n\n  set y(v: number) {\n    this.node.y = v;\n  }\n\n  get boxColor1(): number {\n    return this.node.colorTop;\n  }\n\n  set boxColor1(v: number) {\n    this.node.colorTop = v;\n  }\n\n  get boxColor2(): number {\n    return this.node.colorBottom;\n  }\n\n  set boxColor2(v: number) {\n    this.node.colorBottom = v;\n  }\n\n  get textColor() {\n    return this.textNode.color;\n  }\n\n  set textColor(v: number) {\n    this.textNode.color = v;\n  }\n\n  get fontFamily() {\n    return this.textNode.fontFamily;\n  }\n\n  set fontFamily(v: string) {\n    this.textNode.fontFamily = v;\n  }\n\n  get parent() {\n    return this.node.parent;\n  }\n\n  set parent(v: INode | null) {\n    this.node.parent = v;\n  }\n}\n\nfunction waitForTextFailed(textNode: ITextNode) {\n  return new Promise<Error>((resolve, reject) => {\n    setTimeout(() => {\n      reject(new Error('TIMEOUT'));\n    }, 1000);\n    textNode.once('failed', ((target, payload) => {\n      resolve(payload.error);\n    }) satisfies NodeFailedEventHandler);\n  });\n}\n"],"names":["HEADER_SIZE","FONT_SIZE","BUTTON_PADDING","BEGIN_Y","textEvents","_0","__async","arguments","_ref","renderer","testRoot","_regeneratorRuntime","mark","_callee","marqueeSdf","marqueeCanvas","marqueeText","MARQUEE_MAX","numChars","i","state","textFailedEventTest","textError","wrap","_callee$","_context","prev","next","createTextNode","text","fontSize","offsetY","parent","x","y","settings","appHeight","BoxedText","boxColor1","boxColor2","textColor","fontFamily","on","appWidth","node","width","height","setInterval","length","substring","textRendererOverride","waitForTextFailed","sent","t0","color","stop","props","_this","_classCallCheck","_callSuper","__publicField","target","payload","layout","dimensions","createNode","colorTop","colorBottom","shader","createShader","radius","textNode","alpha","onTextLoaded","_inherits","_EventEmitter","_createClass","key","value","textDimensions","emit","get","set","v","EventEmitter","Promise","resolve","reject","setTimeout","Error","once","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA8BA,IAAMA,WAAc,GAAA,EAAA;QACpB,IAAMC,SAAY,GAAA,EAAA;QAClB,IAAMC,cAAiB,GAAA,EAAA;QACvB,IAAMC,OAAU,GAAAH,WAAA;QAEhB,SAAAI,UAAAA,CAA+BC,EAAyC,EAAA;UAAzC,OAAAC,OAAA,CAAA,IAAA,EAAAC,SAAA,EAAA,UAAAC,IAAA;YAAA,IAAEC,QAAU,GAAAD,IAAA,CAAVC,QAAU;cAAAC,QAAA,GAAAF,IAAA,CAAAE,QAAA;YAAA,oBAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;cAAA,IAAAC,UAAA,EAAAC,aAAA,EAAAC,WAAA,EAAAC,WAAA,EAAAC,QAAA,EAAAC,CAAA,EAAAC,KAAA,EAAAC,mBAAA,EAAAC,SAAA;cAAA,OAAAX,mBAAA,GAAAY,IAAA,UAAAC,SAAAC,QAAA;gBAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;kBAAA;oBAC1BlB,SAASmB,cAAe,CAAA;sBACrCC,IAAM,mBAAA;sBACNC,QAAU,EAAA9B,WAAA;sBACV+B,OAAS,EAAA,CAAA,CAAA;sBACTC,MAAQ,EAAAtB;oBAAA,CACT,CAAA;oBAGgBD,SAASmB,cAAe,CAAA;sBACvCC,IAAM,EAAA,MAAA;sBACNC,QAAU,EAAA,EAAA;sBACVE,MAAQ,EAAAtB,QAAA;sBACRuB,CAAG,EAAA,GAAA;sBACHC,GAAIzB,QAAS,CAAA0B,QAAA,CAASC,SAAY,GAAA,CAAA,GAAK,IAAI,EAAK,GAAA;oBAAA,CACjD,CAAA;oBAEKtB,aAAa,IAAIuB,SAAA,CACrB;sBACEJ,CAAG,EAAA,CAAA;sBACHC,CAAG,EAAA/B,OAAA;sBACHmC,SAAW,EAAA,UAAA;sBACXC,SAAW,EAAA,QAAA;sBACXC,SAAW,EAAA,UAAA;sBACXC,UAAY,EAAA,QAAA;sBACZT,MAAQ,EAAAtB;oBACV,CAAA,EACAD,QAAA,CACF;oBAEWK,UAAA,CAAA4B,EAAA,CAAG,eAAe,YAAM;sBACjC5B,UAAA,CAAWmB,IAAIxB,QAAS,CAAA0B,QAAA,CAASQ,WAAW,CAAI,GAAA7B,UAAA,CAAW8B,KAAKC,KAAQ,GAAA,CAAA;sBAC7D/B,UAAA,CAAAoB,CAAA,GACRzB,SAAS0B,QAAS,CAAAC,SAAA,GAAY,IAAK,CAAI,GAAAtB,UAAA,CAAW8B,KAAKE,MAAS,GAAA,CAAA;oBAAA,CACpE,CAAA;oBAEmBrC,SAASmB,cAAe,CAAA;sBAC1CC,IAAM,EAAA,SAAA;sBACNC,QAAU,EAAA,EAAA;sBACVE,MAAQ,EAAAtB,QAAA;sBACRuB,CAAG,EAAA,GAAA;sBACHC,GAAIzB,QAAS,CAAA0B,QAAA,CAASC,SAAY,GAAA,CAAA,GAAK,IAAI,EAAK,GAAA;oBAAA,CACjD,CAAA;oBAEKrB,gBAAgB,IAAIsB,SAAA,CACxB;sBACEJ,CAAG,EAAA,CAAA;sBACHC,CAAG,EAAA/B,OAAA;sBACHmC,SAAW,EAAA,QAAA;sBACXC,SAAW,EAAA,UAAA;sBACXC,SAAW,EAAA,UAAA;sBACXC,UAAY,EAAA,UAAA;sBACZT,MAAQ,EAAAtB;oBACV,CAAA,EACAD,QAAA,CACF;oBAEcM,aAAA,CAAA2B,EAAA,CAAG,eAAe,YAAM;sBACpC3B,aAAA,CAAckB,IACZxB,QAAS,CAAA0B,QAAA,CAASQ,WAAW,CAAI,GAAA5B,aAAA,CAAc6B,KAAKC,KAAQ,GAAA,CAAA;sBAChD9B,aAAA,CAAAmB,CAAA,GACXzB,SAAS0B,QAAS,CAAAC,SAAA,GAAY,IAAK,CAAI,GAAArB,aAAA,CAAc6B,KAAKE,MAAS,GAAA,CAAA;oBAAA,CACvE,CAAA;oBAEK9B,WAAc;oBAedC,WAAc,GAAA,EAAA;oBAChBC,QAAW,GAAA,CAAA;oBACXC,CAAI,GAAA,CAAA;oBACJC,KAA+C,GAAA,SAAA;oBAEnD2B,WAAA,CAAY,YAAM;sBAChB,IAAI3B,UAAU,SAAW,EAAA;wBACvBF,QAAA,EAAA;wBAEA,IAAIA,QAAY,IAAAD,WAAA,IAAeC,QAAY,IAAAF,WAAA,CAAYgC,SAAS7B,CAAG,EAAA,UAGjED,QAAY,IAAAD,WAAA,IACZC,QAAY,IAAAF,WAAA,CAAYgC,SAAS7B,CACjC,EAAA;0BACWD,QAAA,GAAAD,WAAA;0BACHG,KAAA,GAAA,WAAA;wBAAA,CACV,MAAA,IAAWF,WAAW,CAAG,EAAA;0BACfE,KAAA,GAAA,WAAA;wBACV;sBAAA,CACF,MAAA,IAAWA,UAAU,WAAa,EAAA;wBAChCD,CAAA,EAAA;wBACAD,QAAA,EAAA;wBACA,IAAIA,aAAa,CAAG,EAAA;0BACdC,CAAA,GAAA,CAAA;0BACIC,KAAA,GAAA,SAAA;wBACV;sBAAA,CACK,MAAA;wBACLD,CAAA,EAAA;wBACI,IAAAD,QAAA,IAAYF,WAAY,CAAAgC,MAAA,GAAS7B,CAAG,EAAA;0BAC9BC,KAAA,GAAA,WAAA;wBACV;sBACF;sBAEAN,UAAA,CAAWe,IAAO,GAAAb,WAAA,CAAYiC,SAAU,CAAA9B,CAAA,EAAGA,IAAID,QAAQ,CAAA;sBACvDH,aAAA,CAAcc,OAAOf,UAAW,CAAAe,IAAA;uBAC/B,EAAE,CAAA;oBAECR,mBAAA,GAAsBZ,SAASmB,cAAe,CAAA;sBAClDM,CAAG,EAAA,EAAA;sBACHO,UAAY,EAAA,sBAAA;sBACZS,oBAAsB,EAAA,KAAA;sBACtBlB,MAAQ,EAAAtB,QAAA;sBACRoB,QAAU,EAAA;oBAAA,CACX,CAAA;oBAAAL,QAAA,CAAAC,IAAA;oBAAAD,QAAA,CAAAE,IAAA;oBAIa,OAAMwB,kBAAkB9B,mBAAmB,CAAA;kBAAA;oBAA3CC,SAAA,GAAAG,QAAA,CAAA2B,IAAA;oBAAA3B,QAAA,CAAAE,IAAA;oBAAA;kBAAA;oBAAAF,QAAA,CAAAC,IAAA;oBAAAD,QAAA,CAAA4B,EAAA,GAAA5B,QAAA;kBAAA;oBAKdJ,mBAAA,CAAoBoB,UAAa,GAAA,QAAA;oBACjC,IAAInB,SAAW,EAAA;sBACbD,mBAAA,CAAoBQ,IAAO,GAAA,4BAAA;sBAC3BR,mBAAA,CAAoBiC,KAAQ,GAAA,QAAA;oBAAA,CACvB,MAAA;sBACLjC,mBAAA,CAAoBQ,IAAO,GAAA,4BAAA;sBAC3BR,mBAAA,CAAoBiC,KAAQ,GAAA,UAAA;oBAC9B;kBAAA;kBAAA;oBAAA,OAAA7B,QAAA,CAAA8B,IAAA;gBAAA;cAAA,GAAA1C,OAAA;YAAA;UAAA,CACF,CAAA;QAAA;QAAA,IAYMwB;UAGJ,SAAAA,UACUmB,OACA/C,QACR,EAAA;YAAA,IAAAgD,KAAA;YAAAC,eAAA,OAAArB,SAAA;YACMoB,KAAA,GAAAE,UAAA,OAAAtB,SAAA;YAHEoB,KAAA,CAAAD,KAAA,GAAAA,KAAA;YACAC,KAAA,CAAAhD,QAAA,GAAAA,QAAA;YAJDmD,aAAA,CAAAH,KAAA,EAAA,MAAA,CAAA;YACAG,aAAA,CAAAH,KAAA,EAAA,UAAA,CAAA;YA+BDG,aAAA,CAAAH,KAAA,EAAA,cAAA,EAAuC,UAACI,MAAA,EAAQC,OAAY,EAAA;cAC7DL,KAAA,CAAAM,MAAA,CAAOD,QAAQE,UAAU,CAAA;YAAA,CAChC,CAAA;YA3BOP,KAAA,CAAAb,IAAA,GAAOnC,SAASwD,UAAW,CAAA;cAC9BhC,GAAGuB,KAAM,CAAAvB,CAAA;cACTC,GAAGsB,KAAM,CAAAtB,CAAA;cACTgC,UAAUV,KAAM,CAAAlB,SAAA;cAChB6B,aAAaX,KAAM,CAAAjB,SAAA;cACnB6B,MAAA,EAAQ3D,QAAS,CAAA4D,YAAA,CAAa,kBAAoB,EAAA;gBAChDC,MAAQ,EAAA;cAAA,CACT,CAAA;cACDtC,QAAQwB,KAAM,CAAAxB;YAAA,CACf,CAAA;YAEIyB,KAAA,CAAAc,QAAA,GAAW9D,SAASmB,cAAe,CAAA;cACtCK,CAAG,EAAA,CAAA;cACHC,CAAG,EAAA,CAAA;cACHJ,QAAU,EAAA7B,SAAA;cACV8B,OAAS,EAAA,CAAA,CAAA;cACTyC,KAAO,EAAA,CAAA;cACPlB,OAAOE,KAAM,CAAAhB,SAAA;cACbC,YAAYe,KAAM,CAAAf,UAAA;cAClBT,QAAQyB,KAAA,CAAKb;YAAA,CACd,CAAA;YAEDa,KAAA,CAAKc,QAAS,CAAA7B,EAAA,CAAG,QAAU,EAAAe,KAAA,CAAKgB,YAAY,CAAA;YAAA,OAAAhB,KAAA;UAC9C;UAAAiB,SAAA,CAAArC,SAAA,EAAAsC,aAAA;UAAA,OAAAC,YAAA,CAAAvC,SAAA;YAAAwC,GAAA;YAAAC,KAAA,EAMQ,SAAAf,OAAOgB,cAA4B,EAAA;cACzC,IAAA,CAAKnC,IAAK,CAAAC,KAAA,GAAQkC,cAAe,CAAAlC,KAAA,GAAQ3C,cAAiB,GAAA,CAAA;cAC1D,IAAA,CAAK0C,IAAK,CAAAE,MAAA,GAASiC,cAAe,CAAAjC,MAAA,GAAS5C,cAAiB,GAAA,CAAA;cAC5D,IAAA,CAAKqE,SAAStC,CAAI,GAAA,IAAA,CAAKW,KAAKC,KAAQ,GAAA,CAAA,GAAIkC,eAAelC,KAAQ,GAAA,CAAA;cAC/D,IAAA,CAAK0B,SAASrC,CAAI,GAAA,IAAA,CAAKU,KAAKE,MAAS,GAAA,CAAA,GAAIiC,eAAejC,MAAS,GAAA,CAAA;cACjE,IAAA,CAAKyB,SAASC,KAAQ,GAAA,CAAA;cACtB,IAAA,CAAKQ,KAAK,aAAa,CAAA;YACzB;UAAA;YAAAH,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAmB;cACjB,OAAO,KAAKV,QAAS,CAAA1C,IAAA;YACvB,CAAA;YAAAqD,GAAA,EAEA,SAAAA,IAASC,CAAW,EAAA;cAClB,IAAA,CAAKZ,SAAS1C,IAAO,GAAAsD,CAAA;YACvB;UAAA;YAAAN,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAgB;cACd,OAAO,KAAKrC,IAAK,CAAAX,CAAA;YACnB,CAAA;YAAAiD,GAAA,EAEA,SAAAA,IAAMC,CAAW,EAAA;cACf,IAAA,CAAKvC,KAAKX,CAAI,GAAAkD,CAAA;YAChB;UAAA;YAAAN,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAgB;cACd,OAAO,KAAKrC,IAAK,CAAAV,CAAA;YACnB,CAAA;YAAAgD,GAAA,EAEA,SAAAA,IAAMC,CAAW,EAAA;cACf,IAAA,CAAKvC,KAAKV,CAAI,GAAAiD,CAAA;YAChB;UAAA;YAAAN,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAwB;cACtB,OAAO,KAAKrC,IAAK,CAAAsB,QAAA;YACnB,CAAA;YAAAgB,GAAA,EAEA,SAAAA,IAAcC,CAAW,EAAA;cACvB,IAAA,CAAKvC,KAAKsB,QAAW,GAAAiB,CAAA;YACvB;UAAA;YAAAN,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAwB;cACtB,OAAO,KAAKrC,IAAK,CAAAuB,WAAA;YACnB,CAAA;YAAAe,GAAA,EAEA,SAAAA,IAAcC,CAAW,EAAA;cACvB,IAAA,CAAKvC,KAAKuB,WAAc,GAAAgB,CAAA;YAC1B;UAAA;YAAAN,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAgB;cACd,OAAO,KAAKV,QAAS,CAAAjB,KAAA;YACvB,CAAA;YAAA4B,GAAA,EAEA,SAAAA,IAAcC,CAAW,EAAA;cACvB,IAAA,CAAKZ,SAASjB,KAAQ,GAAA6B,CAAA;YACxB;UAAA;YAAAN,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAiB;cACf,OAAO,KAAKV,QAAS,CAAA9B,UAAA;YACvB,CAAA;YAAAyC,GAAA,EAEA,SAAAA,IAAeC,CAAW,EAAA;cACxB,IAAA,CAAKZ,SAAS9B,UAAa,GAAA0C,CAAA;YAC7B;UAAA;YAAAN,GAAA;YAAAI,GAAA,EAEA,SAAAA,IAAA,EAAa;cACX,OAAO,KAAKrC,IAAK,CAAAZ,MAAA;YACnB,CAAA;YAAAkD,GAAA,EAEA,SAAAA,IAAWC,CAAiB,EAAA;cAC1B,IAAA,CAAKvC,KAAKZ,MAAS,GAAAmD,CAAA;YACrB;UAAA;QAAA,EA5GsBC,YAAuC;QA+G/D,SAASjC,kBAAkBoB,QAAqB,EAAA;UAC9C,OAAO,IAAIc,OAAA,CAAe,UAACC,OAAA,EAASC,MAAW,EAAA;YAC7CC,UAAA,CAAW,YAAM;cACRD,MAAA,CAAA,IAAIE,KAAM,CAAA,SAAS,CAAC,CAAA;eAC1B,GAAI,CAAA;YACPlB,QAAA,CAASmB,IAAK,CAAA,QAAA,EAAW,UAAC7B,MAAA,EAAQC,OAAY,EAAA;cAC5CwB,OAAA,CAAQxB,QAAQ6B,KAAK,CAAA;YAAA,CACY,CAAA;UAAA,CACpC,CAAA;QACH;;;;"}