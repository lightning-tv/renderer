{"version":3,"file":"viewport-events-canvas-legacy-DuVxuECt.js","sources":["../../tests/viewport-events-canvas.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2024 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ExampleSettings } from '../common/ExampleSettings.js';\n\nexport default async function ({ renderer, testRoot }: ExampleSettings) {\n  const instructionText = renderer.createTextNode({\n    text: 'Press space to start animation, arrow keys to move, enter to reset',\n    fontSize: 30,\n    x: 10,\n    y: 960,\n    fontFamily: 'Ubuntu-ssdf',\n    parent: testRoot,\n  });\n\n  const redStatus = renderer.createTextNode({\n    text: 'Red Status: ',\n    fontSize: 30,\n    x: 10,\n    y: 50,\n    fontFamily: 'Ubuntu-ssdf',\n    parent: testRoot,\n  });\n\n  const blueStatus = renderer.createTextNode({\n    text: 'Blue Status: ',\n    fontSize: 30,\n    x: 10,\n    y: 10,\n    fontFamily: 'Ubuntu-ssdf',\n    parent: testRoot,\n  });\n\n  const boundaryRect = renderer.createNode({\n    x: 1920 / 2 - (1920 * 0.75) / 2,\n    y: 1080 / 2 - (1080 * 0.75) / 2,\n    width: 1440,\n    height: 810,\n    color: 0x000000ff,\n    clipping: true,\n    parent: testRoot,\n  });\n\n  const redText = renderer.createTextNode({\n    x: 500,\n    y: 305,\n    alpha: 1,\n    width: 200,\n    height: 200,\n    color: 0xff0000ff,\n    pivot: 0,\n    text: 'red',\n    fontSize: 80,\n    fontFamily: 'sans-serif',\n    parent: boundaryRect,\n  });\n\n  redText.on('outOfBounds', () => {\n    console.log('red text out of bounds');\n    redStatus.text = 'Red Status: text out of bounds';\n    redStatus.color = 0xff0000ff;\n  });\n\n  redText.on('inViewport', () => {\n    console.log('red text in view port');\n    redStatus.text = 'Red Status: text in view port';\n    redStatus.color = 0x00ff00ff;\n  });\n\n  redText.on('inBounds', () => {\n    console.log('red text inside render bounds');\n    redStatus.text = 'Red Status: text in bounds';\n    redStatus.color = 0xffff00ff;\n  });\n\n  const blueText = renderer.createTextNode({\n    x: 1920 / 2 - 200,\n    y: 100,\n    alpha: 1,\n    width: 200,\n    height: 200,\n    color: 0x0000ffff,\n    pivot: 0,\n    text: 'blue',\n    fontSize: 80,\n    fontFamily: 'sans-serif',\n    parent: testRoot,\n  });\n\n  blueText.on('outOfBounds', () => {\n    console.log('blue text ouf ot bounds');\n    blueStatus.text = 'Blue Status: blue text out of bounds';\n    blueStatus.color = 0xff0000ff;\n  });\n\n  blueText.on('inViewport', () => {\n    console.log('blue text in view port');\n    blueStatus.text = 'Blue Status: blue text in view port';\n    blueStatus.color = 0x00ff00ff;\n  });\n\n  blueText.on('inBounds', () => {\n    console.log('blue text inside render bounds');\n    blueStatus.text = 'Blue Status: blue text in bounds';\n    blueStatus.color = 0xffff00ff;\n  });\n\n  let runAnimation = false;\n  const animate = async () => {\n    redText\n      .animate(\n        {\n          x: -500,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start();\n\n    await blueText\n      .animate(\n        {\n          x: -1200,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start()\n      .waitUntilStopped();\n\n    redText.x = 1920 + 400;\n    blueText.x = 1920 + 400;\n\n    redText\n      .animate(\n        {\n          x: 520,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start();\n\n    await blueText\n      .animate(\n        {\n          x: 1920 / 2 - 200,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start()\n      .waitUntilStopped();\n\n    if (runAnimation) {\n      // eslint-disable-next-line @typescript-eslint/no-misused-promises\n      setTimeout(animate, 2000);\n    }\n  };\n\n  const moveModifier = 10;\n  window.onkeydown = (e) => {\n    if (e.key === ' ') {\n      runAnimation = !runAnimation;\n\n      if (runAnimation) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        animate();\n      }\n    }\n\n    if (e.key === 'ArrowRight') {\n      redText.x += moveModifier;\n      blueText.x += moveModifier;\n    }\n\n    if (e.key === 'ArrowLeft') {\n      redText.x -= moveModifier;\n      blueText.x -= moveModifier;\n    }\n\n    if (e.key === 'Enter') {\n      runAnimation = false;\n      redText.x = 520;\n      blueText.x = 1920 / 2 - 200;\n    }\n  };\n}\n"],"names":["viewportEventsCanvas","_0","__async","arguments","_ref","_this","renderer","testRoot","_regeneratorRuntime","mark","_callee2","redStatus","blueStatus","boundaryRect","redText","blueText","runAnimation","_animate","moveModifier","wrap","_callee2$","_context2","prev","next","createTextNode","text","fontSize","x","y","fontFamily","parent","createNode","width","height","color","clipping","alpha","pivot","on","console","log","animate","_callee","_callee$","_context","duration","start","waitUntilStopped","setTimeout","stop","window","onkeydown","e","key"],"mappings":"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"}