{"version":3,"file":"clipping-mutations-Bf-UUoVe.js","sources":["../../tests/clipping-mutations.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\nimport robotImg from '../assets/robot/robot.png';\n\nexport async function automation(settings: ExampleSettings) {\n  const next = await test(settings);\n  // i = 0\n  await settings.snapshot();\n  next();\n  // i = 1\n  await settings.snapshot();\n  next();\n  // i = 2\n  await settings.snapshot();\n}\n\n/**\n * Tests that the clipping rect is updated correctly when a parent node with\n * clipping set is moved.\n *\n * Use the 'right arrow' key to move the clipping parent around.\n *\n * @param settings\n * @returns\n */\nexport default async function test(settings: ExampleSettings) {\n  const { renderer, testRoot } = settings;\n\n  // Set a smaller snapshot area\n  testRoot.width = 200;\n  testRoot.height = 200;\n  testRoot.color = 0xffffffff;\n\n  const clippedContainer = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: testRoot.width / 2,\n    height: testRoot.height / 2,\n    parent: settings.testRoot,\n    color: 0x00ffffff,\n    clipping: true,\n  });\n\n  renderer.createNode({\n    x: -testRoot.width / 4,\n    y: -testRoot.height / 4,\n    width: testRoot.width,\n    height: testRoot.height,\n    scale: 0.9,\n    parent: clippedContainer,\n    src: robotImg,\n  });\n\n  let i = 0;\n  const MAX_I = 2;\n  function next() {\n    i++;\n    if (i > MAX_I) {\n      i = 0;\n    }\n    if (i === 0) {\n      clippedContainer.x = 0;\n      clippedContainer.y = 0;\n    } else if (i === 1) {\n      clippedContainer.x = testRoot.width / 4;\n    } else if (i === 2) {\n      clippedContainer.x = testRoot.width / 2;\n      clippedContainer.y = testRoot.height / 2;\n    }\n  }\n\n  window.addEventListener('keydown', (event) => {\n    // When right arrow is pressed, call next\n    if (event.key === 'ArrowRight') {\n      next();\n    }\n  });\n\n  return next;\n}\n"],"names":[],"mappings":";AAGA,eAAsB,WAAW,UAA2B;AACpD,QAAA,OAAO,MAAM,KAAK,QAAQ;AAEhC,QAAM,SAAS;AACV;AAEL,QAAM,SAAS;AACV;AAEL,QAAM,SAAS;AACjB;AAWA,eAA8B,KAAK,UAA2B;AACtD,QAAA,EAAE,UAAU,SAAa,IAAA;AAG/B,WAAS,QAAQ;AACjB,WAAS,SAAS;AAClB,WAAS,QAAQ;AAEX,QAAA,mBAAmB,SAAS,WAAW;AAAA,IAC3C,GAAG;AAAA,IACH,GAAG;AAAA,IACH,OAAO,SAAS,QAAQ;AAAA,IACxB,QAAQ,SAAS,SAAS;AAAA,IAC1B,QAAQ,SAAS;AAAA,IACjB,OAAO;AAAA,IACP,UAAU;AAAA,EAAA,CACX;AAED,WAAS,WAAW;AAAA,IAClB,GAAG,CAAC,SAAS,QAAQ;AAAA,IACrB,GAAG,CAAC,SAAS,SAAS;AAAA,IACtB,OAAO,SAAS;AAAA,IAChB,QAAQ,SAAS;AAAA,IACjB,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,KAAK;AAAA,EAAA,CACN;AAED,MAAI,IAAI;AACR,QAAM,QAAQ;AACd,WAAS,OAAO;AACd;AACA,QAAI,IAAI,OAAO;AACT,UAAA;AAAA,IACN;AACA,QAAI,MAAM,GAAG;AACX,uBAAiB,IAAI;AACrB,uBAAiB,IAAI;AAAA,IAAA,WACZ,MAAM,GAAG;AACD,uBAAA,IAAI,SAAS,QAAQ;AAAA,IAAA,WAC7B,MAAM,GAAG;AACD,uBAAA,IAAI,SAAS,QAAQ;AACrB,uBAAA,IAAI,SAAS,SAAS;AAAA,IACzC;AAAA,EACF;AAEO,SAAA,iBAAiB,WAAW,CAAC,UAAU;AAExC,QAAA,MAAM,QAAQ,cAAc;AACzB;IACP;AAAA,EAAA,CACD;AAEM,SAAA;AACT;"}