{"version":3,"file":"rtt-dimension-quEDxuOx.js","sources":["../../tests/rtt-dimension.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\nimport rocko from '../assets/rocko.png';\n\nexport async function automation(settings: ExampleSettings) {\n  await test(settings);\n  await settings.snapshot();\n}\n\nexport default async function test({ renderer, testRoot }: ExampleSettings) {\n  const node = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 1920,\n    height: 1080,\n    color: 0x000000ff,\n    parent: testRoot,\n  });\n\n  // RTT Node 1\n  const rttNode = renderer.createNode({\n    x: 100,\n    y: 200,\n    width: 300,\n    height: 300,\n    parent: node,\n    rtt: true,\n    zIndex: 5,\n    colorTop: 0xfff00fff,\n    colorBottom: 0x00ffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode,\n    color: 0xff0000ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode,\n    fontSize: 48,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode,\n    src: rocko,\n  });\n\n  // RTT Node 2\n  const rttNode2 = renderer.createNode({\n    x: 500,\n    y: 200,\n    width: 300,\n    height: 300,\n    parent: node,\n    rtt: true,\n    colorTop: 0xfff00fff,\n    colorBottom: 0x00ffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode2,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode2,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode2,\n    src: rocko,\n  });\n\n  // RTT Node 2\n  const rttNode3 = renderer.createNode({\n    x: 900,\n    y: 200,\n    width: 800,\n    height: 300,\n    parent: node,\n    rtt: true,\n    colorTop: 0x67378dff,\n    colorBottom: 0x9cbd61ff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode3,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode3,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode3,\n    src: rocko,\n  });\n\n  const nestedRTTNode1 = renderer.createNode({\n    x: 400,\n    y: 0,\n    width: 150,\n    height: 150,\n    parent: rttNode3,\n    rtt: true,\n    colorTop: 0x26f1e0ff,\n    colorBottom: 0xffffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 150,\n    height: 150,\n    parent: nestedRTTNode1,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Nested',\n    parent: nestedRTTNode1,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  const rocko4 = renderer.createNode({\n    x: -120,\n    y: 50,\n    width: 300,\n    height: 300,\n    parent: nestedRTTNode1,\n    src: rocko,\n  });\n\n  // Copy source texture from rootRenderToTextureNode\n  for (let i = 0; i < 50; i++) {\n    renderer.createNode({\n      parent: node,\n      x: (i % 15) * 120 + 100,\n      y: Math.floor(i / 15) * 120 + 600,\n      width: 100,\n      height: 100,\n      texture: nestedRTTNode1.texture,\n      // Flip every other one of them\n      textureOptions: {\n        flipY: i % 2 === 1,\n      },\n    });\n  }\n\n  const animation = rocko4.animate(\n    {\n      rotation: 0.3,\n      scale: 1.5,\n      y: 110,\n      x: -50,\n    },\n    {\n      duration: Math.random() * 4000 + 3000,\n      loop: true,\n      stopMethod: 'reverse',\n      easing: 'ease-in-out',\n    },\n  );\n\n  renderer.createTextNode({\n    x: 100,\n    y: 160,\n    text: 'RTT Dimension',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createTextNode({\n    x: 900,\n    y: 160,\n    text: 'Nested RTT',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createTextNode({\n    x: 100,\n    y: 560,\n    text: 'Nested RTT copies',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'r') {\n      rttNode.rtt = !rttNode.rtt;\n      rttNode2.rtt = !rttNode2.rtt;\n      rttNode3.rtt = !rttNode3.rtt;\n    }\n    if (e.key === 's') {\n      animation.start();\n    }\n    if (e.key === 'w') {\n      rttNode.width = rttNode.width === 200 ? 300 : 200;\n      rttNode.height = rttNode.height === 200 ? 300 : 200;\n    }\n  });\n}\n"],"names":["rocko"],"mappings":"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"}