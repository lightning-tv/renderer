{"version":3,"file":"rtt-dimension-legacy-CUZcde_s.js","sources":["../../tests/rtt-dimension.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\nimport rocko from '../assets/rocko.png';\n\nexport async function automation(settings: ExampleSettings) {\n  await test(settings);\n  await settings.snapshot();\n}\n\nexport default async function test({ renderer, testRoot }: ExampleSettings) {\n  const node = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 1920,\n    height: 1080,\n    color: 0x000000ff,\n    parent: testRoot,\n  });\n\n  // RTT Node 1\n  const rttNode = renderer.createNode({\n    x: 100,\n    y: 200,\n    width: 300,\n    height: 300,\n    parent: node,\n    rtt: true,\n    zIndex: 5,\n    colorTop: 0xfff00fff,\n    colorBottom: 0x00ffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode,\n    color: 0xff0000ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode,\n    fontSize: 48,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode,\n    src: rocko,\n  });\n\n  // RTT Node 2\n  const rttNode2 = renderer.createNode({\n    x: 500,\n    y: 200,\n    width: 300,\n    height: 300,\n    parent: node,\n    rtt: true,\n    colorTop: 0xfff00fff,\n    colorBottom: 0x00ffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode2,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode2,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode2,\n    src: rocko,\n  });\n\n  // RTT Node 2\n  const rttNode3 = renderer.createNode({\n    x: 900,\n    y: 200,\n    width: 800,\n    height: 300,\n    parent: node,\n    rtt: true,\n    colorTop: 0x67378dff,\n    colorBottom: 0x9cbd61ff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode3,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode3,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode3,\n    src: rocko,\n  });\n\n  const nestedRTTNode1 = renderer.createNode({\n    x: 400,\n    y: 0,\n    width: 150,\n    height: 150,\n    parent: rttNode3,\n    rtt: true,\n    colorTop: 0x26f1e0ff,\n    colorBottom: 0xffffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 150,\n    height: 150,\n    parent: nestedRTTNode1,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Nested',\n    parent: nestedRTTNode1,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  const rocko4 = renderer.createNode({\n    x: -120,\n    y: 50,\n    width: 300,\n    height: 300,\n    parent: nestedRTTNode1,\n    src: rocko,\n  });\n\n  // Copy source texture from rootRenderToTextureNode\n  for (let i = 0; i < 50; i++) {\n    renderer.createNode({\n      parent: node,\n      x: (i % 15) * 120 + 100,\n      y: Math.floor(i / 15) * 120 + 600,\n      width: 100,\n      height: 100,\n      texture: nestedRTTNode1.texture,\n      // Flip every other one of them\n      textureOptions: {\n        flipY: i % 2 === 1,\n      },\n    });\n  }\n\n  const animation = rocko4.animate(\n    {\n      rotation: 0.3,\n      scale: 1.5,\n      y: 110,\n      x: -50,\n    },\n    {\n      duration: Math.random() * 4000 + 3000,\n      loop: true,\n      stopMethod: 'reverse',\n      easing: 'ease-in-out',\n    },\n  );\n\n  renderer.createTextNode({\n    x: 100,\n    y: 160,\n    text: 'RTT Dimension',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createTextNode({\n    x: 900,\n    y: 160,\n    text: 'Nested RTT',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createTextNode({\n    x: 100,\n    y: 560,\n    text: 'Nested RTT copies',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'r') {\n      rttNode.rtt = !rttNode.rtt;\n      rttNode2.rtt = !rttNode2.rtt;\n      rttNode3.rtt = !rttNode3.rtt;\n    }\n    if (e.key === 's') {\n      animation.start();\n    }\n    if (e.key === 'w') {\n      rttNode.width = rttNode.width === 200 ? 300 : 200;\n      rttNode.height = rttNode.height === 200 ? 300 : 200;\n    }\n  });\n}\n"],"names":["automation","settings","__async","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","test","snapshot","stop","_0","arguments","_ref","renderer","testRoot","_callee2","node","rttNode","rttNode2","rttNode3","nestedRTTNode1","rocko4","i","animation","_callee2$","_context2","createNode","x","y","width","height","color","parent","rtt","zIndex","colorTop","colorBottom","createTextNode","text","fontSize","fontFamily","src","rocko","Math","floor","texture","textureOptions","flipY","animate","rotation","scale","duration","random","loop","stopMethod","easing","window","addEventListener","e","key","start"],"mappings":"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"}