{"version":3,"file":"rtt-dimension-4_7Ojvt5.js","sources":["../../tests/rtt-dimension.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\nimport rocko from '../assets/rocko.png';\n\nexport async function automation(settings: ExampleSettings) {\n  await test(settings);\n  await settings.snapshot();\n}\n\nexport default async function test({ renderer, testRoot }: ExampleSettings) {\n  const node = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 1920,\n    height: 1080,\n    color: 0x000000ff,\n    parent: testRoot,\n  });\n\n  // RTT Node 1\n  const rttNode = renderer.createNode({\n    x: 100,\n    y: 200,\n    width: 300,\n    height: 300,\n    parent: node,\n    rtt: true,\n    zIndex: 5,\n    colorTop: 0xfff00fff,\n    colorBottom: 0x00ffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode,\n    color: 0xff0000ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode,\n    fontSize: 48,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode,\n    src: rocko,\n  });\n\n  // RTT Node 2\n  const rttNode2 = renderer.createNode({\n    x: 500,\n    y: 200,\n    width: 300,\n    height: 300,\n    parent: node,\n    rtt: true,\n    colorTop: 0xfff00fff,\n    colorBottom: 0x00ffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode2,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode2,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode2,\n    src: rocko,\n  });\n\n  // RTT Node 2\n  const rttNode3 = renderer.createNode({\n    x: 900,\n    y: 200,\n    width: 800,\n    height: 300,\n    parent: node,\n    rtt: true,\n    colorTop: 0x67378dff,\n    colorBottom: 0x9cbd61ff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 300,\n    height: 300,\n    parent: rttNode3,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Render to texture',\n    parent: rttNode3,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createNode({\n    x: 50,\n    y: 100,\n    width: 300,\n    height: 300,\n    parent: rttNode3,\n    src: rocko,\n  });\n\n  const nestedRTTNode1 = renderer.createNode({\n    x: 400,\n    y: 0,\n    width: 150,\n    height: 150,\n    parent: rttNode3,\n    rtt: true,\n    colorTop: 0x26f1e0ff,\n    colorBottom: 0xffffffff,\n  });\n\n  renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 150,\n    height: 150,\n    parent: nestedRTTNode1,\n    color: 0xc0ff33ff,\n  });\n\n  renderer.createTextNode({\n    x: 0,\n    y: 0,\n    text: 'Nested',\n    parent: nestedRTTNode1,\n    fontSize: 22,\n    color: 0xff00ffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  const rocko4 = renderer.createNode({\n    x: -120,\n    y: 50,\n    width: 300,\n    height: 300,\n    parent: nestedRTTNode1,\n    src: rocko,\n  });\n\n  // Copy source texture from rootRenderToTextureNode\n  for (let i = 0; i < 50; i++) {\n    renderer.createNode({\n      parent: node,\n      x: (i % 15) * 120 + 100,\n      y: Math.floor(i / 15) * 120 + 600,\n      width: 100,\n      height: 100,\n      texture: nestedRTTNode1.texture,\n      // Flip every other one of them\n      textureOptions: {\n        flipY: i % 2 === 1,\n      },\n    });\n  }\n\n  const animation = rocko4.animate(\n    {\n      rotation: 0.3,\n      scale: 1.5,\n      y: 110,\n      x: -50,\n    },\n    {\n      duration: Math.random() * 4000 + 3000,\n      loop: true,\n      stopMethod: 'reverse',\n      easing: 'ease-in-out',\n    },\n  );\n\n  renderer.createTextNode({\n    x: 100,\n    y: 160,\n    text: 'RTT Dimension',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createTextNode({\n    x: 900,\n    y: 160,\n    text: 'Nested RTT',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  renderer.createTextNode({\n    x: 100,\n    y: 560,\n    text: 'Nested RTT copies',\n    parent: node,\n    fontSize: 22,\n    color: 0xffffffff,\n    fontFamily: 'Ubuntu',\n  });\n\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'r') {\n      rttNode.rtt = !rttNode.rtt;\n      rttNode2.rtt = !rttNode2.rtt;\n      rttNode3.rtt = !rttNode3.rtt;\n    }\n    if (e.key === 's') {\n      animation.start();\n    }\n    if (e.key === 'w') {\n      rttNode.width = rttNode.width === 200 ? 300 : 200;\n      rttNode.height = rttNode.height === 200 ? 300 : 200;\n    }\n  });\n}\n"],"names":["rocko"],"mappings":"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"}