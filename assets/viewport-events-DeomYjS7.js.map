{"version":3,"file":"viewport-events-DeomYjS7.js","sources":["../../tests/viewport-events.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\n\nexport default async function ({ renderer, testRoot }: ExampleSettings) {\n  const degToRad = (deg: number) => {\n    return (Math.PI / 180) * deg;\n  };\n\n  const instructionText = renderer.createTextNode({\n    text: 'Press space to start animation, arrow keys to move, enter to reset',\n    fontSize: 30,\n    x: 10,\n    y: 960,\n    parent: testRoot,\n  });\n\n  const redStatus = renderer.createTextNode({\n    text: 'Red Status: ',\n    fontSize: 30,\n    x: 10,\n    y: 50,\n    parent: testRoot,\n  });\n\n  const blueStatus = renderer.createTextNode({\n    text: 'Blue Status: ',\n    fontSize: 30,\n    x: 10,\n    y: 10,\n    parent: testRoot,\n  });\n\n  const boundaryRect = renderer.createNode({\n    x: 1920 / 2 - (1920 * 0.75) / 2,\n    y: 1080 / 2 - (1080 * 0.75) / 2,\n    width: 1440,\n    height: 810,\n    color: 0x000000ff,\n    clipping: true,\n    parent: testRoot,\n  });\n\n  const redRect = renderer.createNode({\n    // skipRender: true,\n    x: 520,\n    y: 305,\n    alpha: 1,\n    width: 200,\n    height: 200,\n    color: 0xff0000ff,\n    pivot: 0,\n    parent: boundaryRect,\n  });\n\n  redRect.on('outOfBounds', () => {\n    console.log('red rect out of bounds');\n    redStatus.text = 'Red Status: rect out of bounds';\n    redStatus.color = 0xff0000ff;\n  });\n\n  redRect.on('inViewport', () => {\n    console.log('red rect in view port');\n    redStatus.text = 'Red Status: rect in view port';\n    redStatus.color = 0x00ff00ff;\n  });\n\n  redRect.on('inBounds', () => {\n    console.log('red rect inside render bounds');\n    redStatus.text = 'Red Status: rect in bounds';\n    redStatus.color = 0xffff00ff;\n  });\n\n  const blueRect = renderer.createNode({\n    x: 1920 / 2 - 200,\n    y: 100,\n    alpha: 1,\n    width: 200,\n    height: 200,\n    color: 0x0000ffff,\n    pivot: 0,\n    parent: testRoot,\n  });\n\n  blueRect.on('outOfBounds', () => {\n    console.log('blue rect ouf ot bounds');\n    blueStatus.text = 'Blue Status: blue rect out of bounds';\n    blueStatus.color = 0xff0000ff;\n  });\n\n  blueRect.on('inViewport', () => {\n    console.log('blue rect in view port');\n    blueStatus.text = 'Blue Status: blue rect in view port';\n    blueStatus.color = 0x00ff00ff;\n  });\n\n  blueRect.on('inBounds', () => {\n    console.log('blue rect inside render bounds');\n    blueStatus.text = 'Blue Status: blue rect in bounds';\n    blueStatus.color = 0xffff00ff;\n  });\n\n  let runAnimation = false;\n  const animate = async () => {\n    redRect\n      .animate(\n        {\n          x: -500,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start();\n\n    await blueRect\n      .animate(\n        {\n          x: -1200,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start()\n      .waitUntilStopped();\n\n    redRect.x = 1920 + 400;\n    blueRect.x = 1920 + 400;\n\n    redRect\n      .animate(\n        {\n          x: 520,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start();\n\n    await blueRect\n      .animate(\n        {\n          x: 1920 / 2 - 200,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start()\n      .waitUntilStopped();\n\n    if (runAnimation) {\n      // eslint-disable-next-line @typescript-eslint/no-misused-promises\n      setTimeout(animate, 2000);\n    }\n  };\n\n  const moveModifier = 10;\n  window.onkeydown = (e) => {\n    if (e.key === ' ') {\n      runAnimation = !runAnimation;\n\n      if (runAnimation) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        animate();\n      }\n    }\n\n    if (e.key === 'ArrowRight') {\n      redRect.x += moveModifier;\n      blueRect.x += moveModifier;\n    }\n\n    if (e.key === 'ArrowLeft') {\n      redRect.x -= moveModifier;\n      blueRect.x -= moveModifier;\n    }\n\n    if (e.key === 'Enter') {\n      runAnimation = false;\n      redRect.x = 520;\n      blueRect.x = 1920 / 2 - 200;\n    }\n  };\n}\n"],"names":[],"mappings":"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"}