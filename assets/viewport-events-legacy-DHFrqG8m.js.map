{"version":3,"file":"viewport-events-legacy-DHFrqG8m.js","sources":["../../tests/viewport-events.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\n\nexport default async function ({ renderer, testRoot }: ExampleSettings) {\n  const degToRad = (deg: number) => {\n    return (Math.PI / 180) * deg;\n  };\n\n  const instructionText = renderer.createTextNode({\n    text: 'Press space to start animation, arrow keys to move, enter to reset',\n    fontSize: 30,\n    x: 10,\n    y: 960,\n    parent: testRoot,\n  });\n\n  const redStatus = renderer.createTextNode({\n    text: 'Red Status: ',\n    fontSize: 30,\n    x: 10,\n    y: 50,\n    parent: testRoot,\n  });\n\n  const blueStatus = renderer.createTextNode({\n    text: 'Blue Status: ',\n    fontSize: 30,\n    x: 10,\n    y: 10,\n    parent: testRoot,\n  });\n\n  const boundaryRect = renderer.createNode({\n    x: 1920 / 2 - (1920 * 0.75) / 2,\n    y: 1080 / 2 - (1080 * 0.75) / 2,\n    width: 1440,\n    height: 810,\n    color: 0x000000ff,\n    clipping: true,\n    parent: testRoot,\n  });\n\n  const redRect = renderer.createNode({\n    // skipRender: true,\n    x: 520,\n    y: 305,\n    alpha: 1,\n    width: 200,\n    height: 200,\n    color: 0xff0000ff,\n    pivot: 0,\n    parent: boundaryRect,\n  });\n\n  redRect.on('outOfBounds', () => {\n    console.log('red rect out of bounds');\n    redStatus.text = 'Red Status: rect out of bounds';\n    redStatus.color = 0xff0000ff;\n  });\n\n  redRect.on('inViewport', () => {\n    console.log('red rect in view port');\n    redStatus.text = 'Red Status: rect in view port';\n    redStatus.color = 0x00ff00ff;\n  });\n\n  redRect.on('inBounds', () => {\n    console.log('red rect inside render bounds');\n    redStatus.text = 'Red Status: rect in bounds';\n    redStatus.color = 0xffff00ff;\n  });\n\n  const blueRect = renderer.createNode({\n    x: 1920 / 2 - 200,\n    y: 100,\n    alpha: 1,\n    width: 200,\n    height: 200,\n    color: 0x0000ffff,\n    pivot: 0,\n    parent: testRoot,\n  });\n\n  blueRect.on('outOfBounds', () => {\n    console.log('blue rect ouf ot bounds');\n    blueStatus.text = 'Blue Status: blue rect out of bounds';\n    blueStatus.color = 0xff0000ff;\n  });\n\n  blueRect.on('inViewport', () => {\n    console.log('blue rect in view port');\n    blueStatus.text = 'Blue Status: blue rect in view port';\n    blueStatus.color = 0x00ff00ff;\n  });\n\n  blueRect.on('inBounds', () => {\n    console.log('blue rect inside render bounds');\n    blueStatus.text = 'Blue Status: blue rect in bounds';\n    blueStatus.color = 0xffff00ff;\n  });\n\n  let runAnimation = false;\n  const animate = async () => {\n    redRect\n      .animate(\n        {\n          x: -500,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start();\n\n    await blueRect\n      .animate(\n        {\n          x: -1200,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start()\n      .waitUntilStopped();\n\n    redRect.x = 1920 + 400;\n    blueRect.x = 1920 + 400;\n\n    redRect\n      .animate(\n        {\n          x: 520,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start();\n\n    await blueRect\n      .animate(\n        {\n          x: 1920 / 2 - 200,\n        },\n        {\n          duration: 4000,\n        },\n      )\n      .start()\n      .waitUntilStopped();\n\n    if (runAnimation) {\n      // eslint-disable-next-line @typescript-eslint/no-misused-promises\n      setTimeout(animate, 2000);\n    }\n  };\n\n  const moveModifier = 10;\n  window.onkeydown = (e) => {\n    if (e.key === ' ') {\n      runAnimation = !runAnimation;\n\n      if (runAnimation) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        animate();\n      }\n    }\n\n    if (e.key === 'ArrowRight') {\n      redRect.x += moveModifier;\n      blueRect.x += moveModifier;\n    }\n\n    if (e.key === 'ArrowLeft') {\n      redRect.x -= moveModifier;\n      blueRect.x -= moveModifier;\n    }\n\n    if (e.key === 'Enter') {\n      runAnimation = false;\n      redRect.x = 520;\n      blueRect.x = 1920 / 2 - 200;\n    }\n  };\n}\n"],"names":["viewportEvents","_0","__async","arguments","_ref","_this","renderer","testRoot","_regeneratorRuntime","mark","_callee2","redStatus","blueStatus","boundaryRect","redRect","blueRect","runAnimation","_animate","moveModifier","wrap","_callee2$","_context2","prev","next","createTextNode","text","fontSize","x","y","parent","createNode","width","height","color","clipping","alpha","pivot","on","console","log","animate","_callee","_callee$","_context","duration","start","waitUntilStopped","setTimeout","stop","window","onkeydown","e","key"],"mappings":"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"}