{"version":3,"file":"clipping-mutations-legacy-CeejGKcS.js","sources":["../../tests/clipping-mutations.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\nimport robotImg from '../assets/robot/robot.png';\n\nexport async function automation(settings: ExampleSettings) {\n  const next = await test(settings);\n  // i = 0\n  await settings.snapshot();\n  next();\n  // i = 1\n  await settings.snapshot();\n  next();\n  // i = 2\n  await settings.snapshot();\n}\n\n/**\n * Tests that the clipping rect is updated correctly when a parent node with\n * clipping set is moved.\n *\n * Use the 'right arrow' key to move the clipping parent around.\n *\n * @param settings\n * @returns\n */\nexport default async function test(settings: ExampleSettings) {\n  const { renderer, testRoot } = settings;\n\n  // Set a smaller snapshot area\n  testRoot.width = 200;\n  testRoot.height = 200;\n  testRoot.color = 0xffffffff;\n\n  const clippedContainer = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: testRoot.width / 2,\n    height: testRoot.height / 2,\n    parent: settings.testRoot,\n    color: 0x00ffffff,\n    clipping: true,\n  });\n\n  renderer.createNode({\n    x: -testRoot.width / 4,\n    y: -testRoot.height / 4,\n    width: testRoot.width,\n    height: testRoot.height,\n    scale: 0.9,\n    parent: clippedContainer,\n    src: robotImg,\n  });\n\n  let i = 0;\n  const MAX_I = 2;\n  function next() {\n    i++;\n    if (i > MAX_I) {\n      i = 0;\n    }\n    if (i === 0) {\n      clippedContainer.x = 0;\n      clippedContainer.y = 0;\n    } else if (i === 1) {\n      clippedContainer.x = testRoot.width / 4;\n    } else if (i === 2) {\n      clippedContainer.x = testRoot.width / 2;\n      clippedContainer.y = testRoot.height / 2;\n    }\n  }\n\n  window.addEventListener('keydown', (event) => {\n    // When right arrow is pressed, call next\n    if (event.key === 'ArrowRight') {\n      next();\n    }\n  });\n\n  return next;\n}\n"],"names":["automation","settings","__async","_regeneratorRuntime","mark","_callee","next","wrap","_callee$","_context","prev","test","sent","snapshot","stop","_callee2","renderer","testRoot","clippedContainer","i","MAX_I","_callee2$","_context2","_next","x","y","width","height","color","createNode","parent","clipping","scale","src","robotImg","window","addEventListener","event","key","abrupt"],"mappings":"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"}