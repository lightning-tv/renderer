{"version":3,"file":"animation-legacy-CJrEpO24.js","sources":["../../tests/animation.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { IAnimationController } from '@lightningjs/renderer';\n\nimport type { ExampleSettings } from '../common/ExampleSettings.js';\ninterface AnimationExampleSettings {\n  duration: number;\n  easing: string;\n  delay: number;\n  loop: boolean;\n  stopMethod: 'reverse' | 'reset' | false;\n}\n\nexport default async function ({ renderer, testRoot }: ExampleSettings) {\n  const node = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 1920,\n    height: 1080,\n    color: 0x000000ff,\n    parent: testRoot,\n  });\n\n  const animatableNode = renderer.createNode({\n    x: 0,\n    y: 300,\n    width: 200,\n    height: 200,\n    color: 0xffffffff,\n    parent: node,\n  });\n\n  const easingLabel = renderer.createTextNode({\n    parent: node,\n    x: 40,\n    y: 40,\n    fontFamily: 'Ubuntu',\n    fontSize: 40,\n    text: '',\n  });\n\n  const legend = renderer.createTextNode({\n    parent: node,\n    x: 40,\n    y: 90,\n    fontFamily: 'Ubuntu',\n    fontSize: 20,\n    text: 'press left or right arrow key to change easing',\n  });\n\n  /**\n   * Loop animation demo\n   */\n  const easings = [\n    'linear',\n    'ease-in',\n    'ease-out',\n    'ease-in-out',\n    'ease-in-sine',\n    'ease-out-sine',\n    'ease-in-out-sine',\n    'ease-in-cubic',\n    'ease-out-cubic',\n    'ease-in-out-cubic',\n    'ease-in-circ',\n    'ease-out-circ',\n    'ease-in-out-circ',\n    'ease-in-back',\n    'ease-out-back',\n    'ease-in-out-back',\n    'cubic-bezier(0,1.35,.99,-0.07)',\n    'cubic-bezier(.41,.91,.99,-0.07)',\n    'loopStopMethodReverse',\n    'loopStopMethodReset',\n    'loop',\n  ];\n\n  let animationIndex = 0;\n  let currentAnimation: IAnimationController;\n\n  const execEasing = (index = 0): void => {\n    const easing = easings[index] ?? 'linear';\n    easingLabel.text = `Easing demo: ${easing}`;\n    const animationSettings: Partial<AnimationExampleSettings> = {\n      duration: 2000,\n      delay: 500,\n      loop: false,\n      stopMethod: false,\n      easing: 'linear',\n    };\n    animationSettings.easing = easing;\n\n    // restore x position before start of every animation\n    animatableNode.x = 0;\n\n    if (easing === 'loopStopMethodReverse') {\n      animationSettings.easing = 'linear';\n      animationSettings.loop = true;\n      animationSettings.stopMethod = 'reverse';\n    } else if (easing === 'loopStopMethodReset') {\n      animationSettings.easing = 'linear';\n      animationSettings.loop = true;\n      animationSettings.stopMethod = 'reset';\n    } else if (easing === 'loop') {\n      animationSettings.easing = 'linear';\n      animationSettings.loop = true;\n    } else {\n      animationSettings.loop = false;\n      animationSettings.stopMethod = false;\n    }\n\n    if (currentAnimation) {\n      currentAnimation.stop();\n    }\n\n    currentAnimation = animatableNode.animate(\n      {\n        x: renderer.settings.appWidth - animatableNode.width,\n      },\n      animationSettings, // Remove the unnecessary assertion\n    );\n\n    currentAnimation.start();\n  };\n\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'ArrowRight') {\n      animationIndex++;\n    }\n    if (e.key === 'ArrowLeft') {\n      animationIndex--;\n    }\n\n    // wrap around\n    animationIndex =\n      ((animationIndex % easings.length) + easings.length) % easings.length;\n\n    execEasing(animationIndex);\n  });\n\n  execEasing(animationIndex);\n}\n"],"names":["animation","_0","__async","arguments","_ref","renderer","testRoot","_regeneratorRuntime","mark","_callee","node","animatableNode","easingLabel","easings","animationIndex","currentAnimation","execEasing","wrap","_callee$","_context","prev","next","createNode","x","y","width","height","color","parent","createTextNode","fontFamily","fontSize","text","index","length","undefined","_a","easing","concat","animationSettings","duration","delay","loop","stopMethod","stop","animate","settings","appWidth","start","window","addEventListener","e","key"],"mappings":"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"}