{"version":3,"file":"animation-BROCmLCA.js","sources":["../../tests/animation.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { IAnimationController } from '@lightningjs/renderer';\n\nimport type { ExampleSettings } from '../common/ExampleSettings.js';\ninterface AnimationExampleSettings {\n  duration: number;\n  easing: string;\n  delay: number;\n  loop: boolean;\n  stopMethod: 'reverse' | 'reset' | false;\n}\n\nexport default async function ({ renderer, testRoot }: ExampleSettings) {\n  const node = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 1920,\n    height: 1080,\n    color: 0x000000ff,\n    parent: testRoot,\n  });\n\n  const animatableNode = renderer.createNode({\n    x: 0,\n    y: 300,\n    width: 200,\n    height: 200,\n    color: 0xffffffff,\n    parent: node,\n  });\n\n  const easingLabel = renderer.createTextNode({\n    parent: node,\n    x: 40,\n    y: 40,\n    fontFamily: 'Ubuntu',\n    fontSize: 40,\n    text: '',\n  });\n\n  const legend = renderer.createTextNode({\n    parent: node,\n    x: 40,\n    y: 90,\n    fontFamily: 'Ubuntu',\n    fontSize: 20,\n    text: 'press left or right arrow key to change easing',\n  });\n\n  /**\n   * Loop animation demo\n   */\n  const easings = [\n    'linear',\n    'ease-in',\n    'ease-out',\n    'ease-in-out',\n    'ease-in-sine',\n    'ease-out-sine',\n    'ease-in-out-sine',\n    'ease-in-cubic',\n    'ease-out-cubic',\n    'ease-in-out-cubic',\n    'ease-in-circ',\n    'ease-out-circ',\n    'ease-in-out-circ',\n    'ease-in-back',\n    'ease-out-back',\n    'ease-in-out-back',\n    'cubic-bezier(0,1.35,.99,-0.07)',\n    'cubic-bezier(.41,.91,.99,-0.07)',\n    'loopStopMethodReverse',\n    'loopStopMethodReset',\n    'loop',\n  ];\n\n  let animationIndex = 0;\n  let currentAnimation: IAnimationController;\n\n  const execEasing = (index = 0): void => {\n    const easing = easings[index] ?? 'linear';\n    easingLabel.text = `Easing demo: ${easing}`;\n    const animationSettings: Partial<AnimationExampleSettings> = {\n      duration: 2000,\n      delay: 500,\n      loop: false,\n      stopMethod: false,\n      easing: 'linear',\n    };\n    animationSettings.easing = easing;\n\n    // restore x position before start of every animation\n    animatableNode.x = 0;\n\n    if (easing === 'loopStopMethodReverse') {\n      animationSettings.easing = 'linear';\n      animationSettings.loop = true;\n      animationSettings.stopMethod = 'reverse';\n    } else if (easing === 'loopStopMethodReset') {\n      animationSettings.easing = 'linear';\n      animationSettings.loop = true;\n      animationSettings.stopMethod = 'reset';\n    } else if (easing === 'loop') {\n      animationSettings.easing = 'linear';\n      animationSettings.loop = true;\n    } else {\n      animationSettings.loop = false;\n      animationSettings.stopMethod = false;\n    }\n\n    if (currentAnimation) {\n      currentAnimation.stop();\n    }\n\n    currentAnimation = animatableNode.animate(\n      {\n        x: renderer.settings.appWidth - animatableNode.width,\n      },\n      animationSettings, // Remove the unnecessary assertion\n    );\n\n    currentAnimation.start();\n  };\n\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'ArrowRight') {\n      animationIndex++;\n    }\n    if (e.key === 'ArrowLeft') {\n      animationIndex--;\n    }\n\n    // wrap around\n    animationIndex =\n      ((animationIndex % easings.length) + easings.length) % easings.length;\n\n    execEasing(animationIndex);\n  });\n\n  execEasing(animationIndex);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AA8BA,SAAA,UAA+B,IAAyC;AAAzC,SAAA,QAAA,MAAA,WAAA,WAAA,EAAE,UAAU,YAA6B;AAChE,UAAA,OAAO,SAAS,WAAW;AAAA,MAC/B,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,QAAQ;AAAA,IAAA,CACT;AAEK,UAAA,iBAAiB,SAAS,WAAW;AAAA,MACzC,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,QAAQ;AAAA,IAAA,CACT;AAEK,UAAA,cAAc,SAAS,eAAe;AAAA,MAC1C,QAAQ;AAAA,MACR,GAAG;AAAA,MACH,GAAG;AAAA,MACH,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,MAAM;AAAA,IAAA,CACP;AAEc,aAAS,eAAe;AAAA,MACrC,QAAQ;AAAA,MACR,GAAG;AAAA,MACH,GAAG;AAAA,MACH,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,MAAM;AAAA,IAAA,CACP;AAKD,UAAM,UAAU;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAGF,QAAI,iBAAiB;AACjB,QAAA;AAEE,UAAA,aAAa,CAAC,QAAQ,MAAY;AAjG1C,UAAA;AAkGI,YAAM,UAAS,KAAA,QAAQ,KAAK,MAAb,OAAkB,KAAA;AACrB,kBAAA,OAAO,gBAAgB;AACnC,YAAM,oBAAuD;AAAA,QAC3D,UAAU;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,QAAQ;AAAA,MAAA;AAEV,wBAAkB,SAAS;AAG3B,qBAAe,IAAI;AAEnB,UAAI,WAAW,yBAAyB;AACtC,0BAAkB,SAAS;AAC3B,0BAAkB,OAAO;AACzB,0BAAkB,aAAa;AAAA,MAAA,WACtB,WAAW,uBAAuB;AAC3C,0BAAkB,SAAS;AAC3B,0BAAkB,OAAO;AACzB,0BAAkB,aAAa;AAAA,MAAA,WACtB,WAAW,QAAQ;AAC5B,0BAAkB,SAAS;AAC3B,0BAAkB,OAAO;AAAA,MAAA,OACpB;AACL,0BAAkB,OAAO;AACzB,0BAAkB,aAAa;AAAA,MACjC;AAEA,UAAI,kBAAkB;AACpB,yBAAiB,KAAK;AAAA,MACxB;AAEA,yBAAmB,eAAe;AAAA,QAChC;AAAA,UACE,GAAG,SAAS,SAAS,WAAW,eAAe;AAAA,QACjD;AAAA,QACA;AAAA;AAAA,MAAA;AAGF,uBAAiB,MAAM;AAAA,IAAA;AAGlB,WAAA,iBAAiB,WAAW,CAAC,MAAM;AACpC,UAAA,EAAE,QAAQ,cAAc;AAC1B;AAAA,MACF;AACI,UAAA,EAAE,QAAQ,aAAa;AACzB;AAAA,MACF;AAGA,wBACI,iBAAiB,QAAQ,SAAU,QAAQ,UAAU,QAAQ;AAEjE,iBAAW,cAAc;AAAA,IAAA,CAC1B;AAED,eAAW,cAAc;AAAA,EAAA,CAC3B;AAAA;"}