{"version":3,"file":"text-offscreen-move-legacy-VTav9BQU.js","sources":["../../tests/text-offscreen-move.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type {\n  INode,\n  ITextNodeProps,\n  RendererMain,\n} from '@lightningjs/renderer';\nimport type { ExampleSettings } from '../common/ExampleSettings.js';\nimport { PageContainer } from '../common/PageContainer.js';\n\nexport async function automation(settings: ExampleSettings) {\n  // Snapshot all the pages\n  await (await test(settings)).snapshotPages();\n}\n\n/**\n * This test is to ensure that text that starts offscreen and moves onscreen\n * is rendered correctly.\n *\n * This test was designed around the following bug report:\n * https://github.com/lightning-js/renderer/issues/50\n *\n * @param param0\n */\nexport default async function test(settings: ExampleSettings) {\n  const { renderer } = settings;\n  const pageContainer = new PageContainer(settings, {\n    width: renderer.settings.appWidth,\n    height: renderer.settings.appHeight,\n    title: 'Text Offscreen Move Tests',\n  });\n\n  pageContainer.pushPage(createTestCase(renderer, 'sdf', 'none'));\n  pageContainer.pushPage(createTestCase(renderer, 'sdf', 'width'));\n  pageContainer.pushPage(createTestCase(renderer, 'sdf', 'both'));\n  pageContainer.pushPage(createTestCase(renderer, 'canvas', 'none'));\n  pageContainer.pushPage(createTestCase(renderer, 'canvas', 'width'));\n  pageContainer.pushPage(createTestCase(renderer, 'canvas', 'both'));\n\n  await delay(200);\n  pageContainer.finalizePages();\n  return pageContainer;\n}\n\nconst commonTextProps = {\n  mount: 0.5,\n  width: 400,\n  height: 400,\n  contain: 'none',\n  text: 'Test passes if this text appears only as green',\n  fontFamily: 'Ubuntu',\n  textRendererOverride: 'canvas',\n  fontSize: 50,\n} satisfies Partial<ITextNodeProps>;\n\nfunction createTestCase(\n  renderer: RendererMain,\n  textRenderer: 'canvas' | 'sdf',\n  contain: ITextNodeProps['contain'],\n) {\n  return async function (page: INode) {\n    const subheader = renderer.createTextNode({\n      x: 0,\n      y: 10,\n      text: '',\n      fontFamily: 'Ubuntu',\n      textRendererOverride: 'sdf',\n      fontSize: 30,\n      parent: page,\n    });\n\n    subheader.text = `textRenderer = ${textRenderer}\\ncontain = ${contain}`;\n    renderer.createTextNode({\n      ...commonTextProps,\n      color: 0xff0000ff,\n      x: renderer.settings.appWidth / 2,\n      y: renderer.settings.appHeight / 2,\n      textRendererOverride: textRenderer,\n      contain,\n      parent: page,\n    });\n\n    const offscreenStartText = renderer.createTextNode({\n      ...commonTextProps,\n      color: 0x00ff00ff,\n      x: -1000,\n      y: -1000,\n      textRendererOverride: textRenderer,\n      contain,\n      parent: page,\n    });\n\n    // Move Offscreen Text on screen\n    offscreenStartText.x = renderer.settings.appWidth / 2;\n    offscreenStartText.y = renderer.settings.appHeight / 2;\n  };\n}\n\nfunction delay(ms: number) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n"],"names":["automation","settings","__async","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","test","sent","snapshotPages","stop","_callee2","renderer","pageContainer","_callee2$","_context2","PageContainer","width","appWidth","height","appHeight","title","pushPage","createTestCase","delay","finalizePages","abrupt","commonTextProps","mount","contain","text","fontFamily","textRendererOverride","fontSize","textRenderer","page","_callee3","subheader","offscreenStartText","_callee3$","_context3","createTextNode","x","y","parent","concat","__spreadProps","color","__spreadValues","ms","Promise","resolve","setTimeout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA2BA,SAAsBA,WAAWC,QAA2B,EAAA;UAAA,OAAAC,OAAA,CAAA,IAAA,EAAA,IAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAA,SAAAC,QAAA;YAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;cAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;gBAAA;kBAAAF,QAAA,CAAAE,IAAA;kBAEnD,OAAMC,IAAA,CAAKV,QAAQ,CAAA;gBAAA;kBAAAO,QAAA,CAAAE,IAAA;kBAA1B,OAAAF,QAAA,CAAAI,IAAA,CAA6BC,aAAc;gBAAA;gBAAA;kBAAA,OAAAL,QAAA,CAAAM,IAAA;cAAA;YAAA,GAAAT,OAAA;UAAA,CAC7C,EAAA;QAAA;QAWA,SAA8BM,KAAKV,QAA2B,EAAA;UAAA,OAAAC,OAAA,CAAA,IAAA,EAAA,IAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAA,SAAAW,SAAA;YAAA,IAAAC,QAAA,EAAAC,aAAA;YAAA,OAAAd,mBAAA,GAAAG,IAAA,UAAAY,UAAAC,SAAA;cAAA,kBAAAA,SAAA,CAAAV,IAAA,GAAAU,SAAA,CAAAT,IAAA;gBAAA;kBACpDM,WAAaf,QAAA,CAAbe;kBACFC,aAAA,GAAgB,IAAIG,aAAA,CAAcnB,QAAU,EAAA;oBAChDoB,KAAA,EAAOL,SAASf,QAAS,CAAAqB,QAAA;oBACzBC,MAAA,EAAQP,SAASf,QAAS,CAAAuB,SAAA;oBAC1BC,KAAO,EAAA;kBAAA,CACR,CAAA;kBAEDR,aAAA,CAAcS,QAAS,CAAAC,cAAA,CAAeX,QAAU,EAAA,KAAA,EAAO,MAAM,CAAC,CAAA;kBAC9DC,aAAA,CAAcS,QAAS,CAAAC,cAAA,CAAeX,QAAU,EAAA,KAAA,EAAO,OAAO,CAAC,CAAA;kBAC/DC,aAAA,CAAcS,QAAS,CAAAC,cAAA,CAAeX,QAAU,EAAA,KAAA,EAAO,MAAM,CAAC,CAAA;kBAC9DC,aAAA,CAAcS,QAAS,CAAAC,cAAA,CAAeX,QAAU,EAAA,QAAA,EAAU,MAAM,CAAC,CAAA;kBACjEC,aAAA,CAAcS,QAAS,CAAAC,cAAA,CAAeX,QAAU,EAAA,QAAA,EAAU,OAAO,CAAC,CAAA;kBAClEC,aAAA,CAAcS,QAAS,CAAAC,cAAA,CAAeX,QAAU,EAAA,QAAA,EAAU,MAAM,CAAC,CAAA;kBAAAG,SAAA,CAAAT,IAAA;kBAEjE,OAAMkB,MAAM,GAAG,CAAA;gBAAA;kBACfX,aAAA,CAAcY,aAAc,CAAA,CAAA;kBAAA,OAAAV,SAAA,CAAAW,MAAA,WACrBb,aAAA;gBAAA;gBAAA;kBAAA,OAAAE,SAAA,CAAAL,IAAA;cAAA;YAAA,GAAAC,QAAA;UAAA,CACT,EAAA;QAAA;QAEA,IAAMgB,eAAkB,GAAA;UACtBC,KAAO,EAAA,GAAA;UACPX,KAAO,EAAA,GAAA;UACPE,MAAQ,EAAA,GAAA;UACRU,OAAS,EAAA,MAAA;UACTC,IAAM,EAAA,gDAAA;UACNC,UAAY,EAAA,QAAA;UACZC,oBAAsB,EAAA,QAAA;UACtBC,QAAU,EAAA;QACZ,CAAA;QAEA,SAASV,cAAAA,CACPX,QACA,EAAAsB,YAAA,EACAL,OACA,EAAA;UACA,OAAO,UAAgBM,IAAa,EAAA;YAAA,OAAArC,OAAA,CAAA,IAAA,EAAA,IAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAA,SAAAoC,SAAA;cAAA,IAAAC,SAAA,EAAAC,kBAAA;cAAA,OAAAvC,mBAAA,GAAAG,IAAA,UAAAqC,UAAAC,SAAA;gBAAA,kBAAAA,SAAA,CAAAnC,IAAA,GAAAmC,SAAA,CAAAlC,IAAA;kBAAA;oBAC5B+B,SAAA,GAAYzB,SAAS6B,cAAe,CAAA;sBACxCC,CAAG,EAAA,CAAA;sBACHC,CAAG,EAAA,EAAA;sBACHb,IAAM,EAAA,EAAA;sBACNC,UAAY,EAAA,QAAA;sBACZC,oBAAsB,EAAA,KAAA;sBACtBC,QAAU,EAAA,EAAA;sBACVW,MAAQ,EAAAT;oBAAA,CACT,CAAA;oBAESE,SAAA,CAAAP,IAAA,qBAAAe,MAAA,CAAyBX,YAAY,kBAAAW,MAAA,CAAehB,OAAO,CAAA;oBAC5DjB,QAAA,CAAA6B,cAAA,CAAeK,iCACnBnB,eADmB,CAAA,EAAA;sBAEtBoB,KAAO,EAAA,UAAA;sBACPL,CAAA,EAAG9B,QAAS,CAAAf,QAAA,CAASqB,QAAW,GAAA,CAAA;sBAChCyB,CAAA,EAAG/B,QAAS,CAAAf,QAAA,CAASuB,SAAY,GAAA,CAAA;sBACjCY,oBAAsB,EAAAE,YAAA;sBACtBL,OAAA,EAAAA,OAAA;sBACAe,MAAQ,EAAAT;oBACT,CAAA,CAAA,CAAA;oBAEKG,kBAAqB,GAAA1B,QAAA,CAAS6B,cAAe,CAAAK,aAAA,CAAAE,cAAA,CAAA,CAAA,CAAA,EAC9CrB,eAD8C,CAAA,EAAA;sBAEjDoB,KAAO,EAAA,QAAA;sBACPL,CAAG,EAAA,CAAA,GAAA;sBACHC,CAAG,EAAA,CAAA,GAAA;sBACHX,oBAAsB,EAAAE,YAAA;sBACtBL,OAAA,EAAAA,OAAA;sBACAe,MAAQ,EAAAT;oBACT,CAAA,CAAA,CAAA;oBAGkBG,kBAAA,CAAAI,CAAA,GAAI9B,QAAS,CAAAf,QAAA,CAASqB,QAAW,GAAA,CAAA;oBACjCoB,kBAAA,CAAAK,CAAA,GAAI/B,QAAS,CAAAf,QAAA,CAASuB,SAAY,GAAA,CAAA;kBAAA;kBAAA;oBAAA,OAAAoB,SAAA,CAAA9B,IAAA;gBAAA;cAAA,GAAA0B,QAAA;YAAA,CACvD,EAAA;UAAA,CAAA;QACF;QAEA,SAASZ,MAAMyB,EAAY,EAAA;UACzB,OAAO,IAAIC,OAAQ,CAAA,UAACC;mBAAYC,UAAW,CAAAD,OAAA,EAASF,EAAE,CAAC;UAAA,EAAA;QACzD;;;;"}