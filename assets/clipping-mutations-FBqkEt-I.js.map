{"version":3,"file":"clipping-mutations-FBqkEt-I.js","sources":["../../tests/clipping-mutations.ts"],"sourcesContent":["import type { ExampleSettings } from '../common/ExampleSettings.js';\nimport robotImg from '../assets/robot/robot.png';\n\nexport async function automation(settings: ExampleSettings) {\n  const next = await test(settings);\n  // i = 0\n  await settings.snapshot();\n  next();\n  // i = 1\n  await settings.snapshot();\n  next();\n  // i = 2\n  await settings.snapshot();\n}\n\n/**\n * Tests that the clipping rect is updated correctly when a parent node with\n * clipping set is moved.\n *\n * Use the 'right arrow' key to move the clipping parent around.\n *\n * @param settings\n * @returns\n */\nexport default async function test(settings: ExampleSettings) {\n  const { renderer, testRoot } = settings;\n\n  // Set a smaller snapshot area\n  testRoot.width = 200;\n  testRoot.height = 200;\n  testRoot.color = 0xffffffff;\n\n  const clippedContainer = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: testRoot.width / 2,\n    height: testRoot.height / 2,\n    parent: settings.testRoot,\n    color: 0x00ffffff,\n    clipping: true,\n  });\n\n  renderer.createNode({\n    x: -testRoot.width / 4,\n    y: -testRoot.height / 4,\n    width: testRoot.width,\n    height: testRoot.height,\n    scale: 0.9,\n    parent: clippedContainer,\n    src: robotImg,\n  });\n\n  let i = 0;\n  const MAX_I = 2;\n  function next() {\n    i++;\n    if (i > MAX_I) {\n      i = 0;\n    }\n    if (i === 0) {\n      clippedContainer.x = 0;\n      clippedContainer.y = 0;\n    } else if (i === 1) {\n      clippedContainer.x = testRoot.width / 4;\n    } else if (i === 2) {\n      clippedContainer.x = testRoot.width / 2;\n      clippedContainer.y = testRoot.height / 2;\n    }\n  }\n\n  window.addEventListener('keydown', (event) => {\n    // When right arrow is pressed, call next\n    if (event.key === 'ArrowRight') {\n      next();\n    }\n  });\n\n  return next;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGA,SAAsB,WAAW,UAA2B;AAAA,SAAA,QAAA,MAAA,MAAA,aAAA;AACpD,UAAA,OAAO,MAAM,KAAK,QAAQ;AAEhC,UAAM,SAAS;AACV;AAEL,UAAM,SAAS;AACV;AAEL,UAAM,SAAS;EAAS,CAC1B;AAAA;AAWA,SAA8B,KAAK,UAA2B;AAAA,SAAA,QAAA,MAAA,MAAA,aAAA;AACtD,UAAA,EAAE,UAAU,SAAa,IAAA;AAG/B,aAAS,QAAQ;AACjB,aAAS,SAAS;AAClB,aAAS,QAAQ;AAEX,UAAA,mBAAmB,SAAS,WAAW;AAAA,MAC3C,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO,SAAS,QAAQ;AAAA,MACxB,QAAQ,SAAS,SAAS;AAAA,MAC1B,QAAQ,SAAS;AAAA,MACjB,OAAO;AAAA,MACP,UAAU;AAAA,IAAA,CACX;AAED,aAAS,WAAW;AAAA,MAClB,GAAG,CAAC,SAAS,QAAQ;AAAA,MACrB,GAAG,CAAC,SAAS,SAAS;AAAA,MACtB,OAAO,SAAS;AAAA,MAChB,QAAQ,SAAS;AAAA,MACjB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,KAAK;AAAA,IAAA,CACN;AAED,QAAI,IAAI;AACR,UAAM,QAAQ;AACd,aAAS,OAAO;AACd;AACA,UAAI,IAAI,OAAO;AACT,YAAA;AAAA,MACN;AACA,UAAI,MAAM,GAAG;AACX,yBAAiB,IAAI;AACrB,yBAAiB,IAAI;AAAA,MAAA,WACZ,MAAM,GAAG;AACD,yBAAA,IAAI,SAAS,QAAQ;AAAA,MAAA,WAC7B,MAAM,GAAG;AACD,yBAAA,IAAI,SAAS,QAAQ;AACrB,yBAAA,IAAI,SAAS,SAAS;AAAA,MACzC;AAAA,IACF;AAEO,WAAA,iBAAiB,WAAW,CAAC,UAAU;AAExC,UAAA,MAAM,QAAQ,cAAc;AACzB;MACP;AAAA,IAAA,CACD;AAEM,WAAA;AAAA,EAAA,CACT;AAAA;"}