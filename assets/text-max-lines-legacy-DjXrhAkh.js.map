{"version":3,"file":"text-max-lines-legacy-DjXrhAkh.js","sources":["../../tests/text-max-lines.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ITextNodeProps, RendererMain } from '@lightningjs/renderer';\nimport type { ExampleSettings } from '../common/ExampleSettings.js';\nimport { paginateTestRows, type TestRow } from '../common/paginateTestRows.js';\nimport { PageContainer } from '../common/PageContainer.js';\nimport { constructTestRow } from '../common/constructTestRow.js';\nimport { getLoremIpsum } from '../common/LoremIpsum.js';\n\nexport async function automation(settings: ExampleSettings) {\n  // Snapshot all the pages\n  await (await test(settings)).snapshotPages();\n}\n\nexport default async function test(settings: ExampleSettings) {\n  const { renderer } = settings;\n  const pageContainer = new PageContainer(settings, {\n    width: renderer.settings.appWidth,\n    height: renderer.settings.appHeight,\n    title: 'Text Max Lines',\n  });\n\n  await paginateTestRows(pageContainer, [\n    ...generateMaxLinesTest(renderer, 'sdf'),\n    null,\n    ...generateMaxLinesTest(renderer, 'canvas'),\n  ]);\n\n  return pageContainer;\n}\n\nconst BASE_NODE_PROPS = {\n  x: 100,\n  y: 100,\n  width: 200,\n  color: 0x000000ff,\n  fontFamily: 'Ubuntu',\n  textRendererOverride: 'sdf',\n  fontSize: 20,\n  lineHeight: 28,\n  contain: 'width',\n} satisfies Partial<ITextNodeProps>;\n\nfunction generateMaxLinesTest(\n  renderer: RendererMain,\n  textRenderer: 'canvas' | 'sdf',\n): TestRow[] {\n  return [\n    {\n      title: `Wrapped + Explicit Lines ('maxLines', ${textRenderer})`,\n      content: async (rowNode) => {\n        const nodeProps = {\n          ...BASE_NODE_PROPS,\n          text: 'Line1 Line1_Line1_Line1\\nLine2 Line2____Line2\\nLine 3\\nLine 4',\n          textRendererOverride: textRenderer,\n        } satisfies Partial<ITextNodeProps>;\n\n        const baselineNode = renderer.createTextNode({\n          ...nodeProps,\n        });\n\n        const position = {\n          x: 0,\n          y: 0,\n        };\n\n        baselineNode.x = position.x;\n        baselineNode.y = position.y;\n\n        return await constructTestRow({ renderer, rowNode }, [\n          baselineNode,\n          'maxLines: 1 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 1,\n          }),\n          '2 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 2,\n          }),\n          '3 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 3,\n          }),\n          '4 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 4,\n          }),\n          '5 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 5,\n          }),\n        ]);\n      },\n    },\n    {\n      title: `Lorem Ipsum ('maxLines', ${textRenderer})`,\n      content: async (rowNode) => {\n        const nodeProps = {\n          ...BASE_NODE_PROPS,\n          text: getLoremIpsum(100),\n          textRendererOverride: textRenderer,\n        } satisfies Partial<ITextNodeProps>;\n\n        const baselineNode = renderer.createTextNode({\n          ...nodeProps,\n        });\n\n        const position = {\n          x: 0,\n          y: 0,\n        };\n\n        baselineNode.x = position.x;\n        baselineNode.y = position.y;\n\n        return await constructTestRow({ renderer, rowNode }, [\n          baselineNode,\n          'maxLines: 1 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 1,\n          }),\n          '2 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 2,\n          }),\n          '3 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 3,\n          }),\n          '4 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 4,\n          }),\n          '5 ->',\n          renderer.createTextNode({\n            ...nodeProps,\n            ...position,\n            maxLines: 5,\n          }),\n        ]);\n      },\n    },\n  ] satisfies TestRow[];\n}\n"],"names":["automation","settings","__async","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","test","sent","snapshotPages","stop","_callee2","renderer","pageContainer","_callee2$","_context2","PageContainer","width","appWidth","height","appHeight","title","paginateTestRows","concat","_toConsumableArray","generateMaxLinesTest","abrupt","BASE_NODE_PROPS","x","y","color","fontFamily","textRendererOverride","fontSize","lineHeight","contain","textRenderer","_this","content","rowNode","_callee3","nodeProps","baselineNode","position","_callee3$","_context3","__spreadProps","text","createTextNode","__spreadValues","constructTestRow","maxLines","_callee4","_callee4$","_context4","getLoremIpsum"],"mappings":"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"}